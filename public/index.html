<!DOCTYPE html>
<html>
<head>
  <title>Generador AutomÃ¡tico</title>
</head>
<body>
  <h2>ðŸŽ¬ Generador de Reels o Carrusel</h2>
  <input type="text" id="eleven_api" placeholder="ElevenLabs API Key"><br>
  <input type="text" id="pexels_api" placeholder="Pexels API Key"><br>
  <select id="modo">
    <option value="video">Video</option>
    <option value="carrusel">Carrusel</option>
  </select><br>
  <textarea id="guiones" rows="5" cols="50" placeholder="LÃ­neas del guion"></textarea><br>
  <textarea id="etiquetas" rows="5" cols="50" placeholder="Etiquetas en inglÃ©s"></textarea><br>
  <button onclick="enviar()">Empezar</button><br><br>
  <pre id="consola">Esperando ejecuciÃ³n...</pre><br>
  <button onclick="descargar()">Descargar</button>

  <script>
    async function enviar() {
      document.getElementById("consola").innerText = "Procesando...";
      const res = await fetch('/generar', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          eleven_api: document.getElementById('eleven_api').value,
          pexels_api: document.getElementById('pexels_api').value,
          modo: document.getElementById('modo').value,
          guiones: document.getElementById('guiones').value,
          etiquetas: document.getElementById('etiquetas').value
        })
      });
      const data = await res.json();
      document.getElementById("consola").innerText = data.logs || data.error;
    }

    function descargar() {
      const modo = document.getElementById('modo').value;
      window.location.href = modo === "video" ? "/descargar_video" : "/descargar_carrusel";
    }
  </script>
</body>
</html>
